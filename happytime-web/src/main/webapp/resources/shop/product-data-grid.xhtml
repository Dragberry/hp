<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface>
	<composite:attribute name="сontroller" required="true"/>
	<composite:attribute name="model" required="true"/>
</composite:interface>

<composite:implementation>
	<p:growl id="cartMessages" showDetail="true" /> 

	<p:dataGrid id="product-data-grid"
		value="#{cc.attrs.model.dataModel}"
       	var="product"  
		columns="3" 
		layout="grid"
        rows="12" 
        lazy="true"
        paginator="true" 
        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        currentPageReportTemplate="{currentPage} #{translation.translate('HTpageOf')} {totalPages}"
        rowsPerPageTemplate="6,12,16">
        
        <p:ajax event="page" listener="#{cc.attrs.controller.onPageChange}" />
 
        <p:panel header="#{product.title}" style="text-align:center">
        	<h:link value="Details" outcome="/faces/shop/product?productId=#{product.id}" target="_blank"/>
        	<p:graphicImage value="/resources/images/#{product.imgLink}"
        		alt="#{product.keywords}"/>
       		<br/>
       		<h:outputText value="#{product.cost}" />
       		<br />
	        <h:outputText value="#{product.description}" />
	        <p:commandButton id="addToCartButton"
	        	value="#{translation.translate('HTaddToCart')}"
	        	ajax="true"
	        	process="@this"
	        	actionListener="#{cc.attrs.controller.addToCart(product)}"
	        	update="@([id$=cartMessages])" />
        </p:panel>
 
    </p:dataGrid>
</composite:implementation>
</html>